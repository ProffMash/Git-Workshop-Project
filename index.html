<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Commerce Cart</title>
    <!-- Link to your external CSS file -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Our Products</h1>
        <div class="product-list">
            <!-- Product 1 -->
            <div class="product-item" data-id="1" data-name="Wireless Headphones" data-price="99.99" data-image="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aGVhZHBob25lc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=100&q=60">
                <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8aGVhZHBob25lc3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=100&q=60" alt="Wireless Headphones">
                <h3>Wireless Headphones</h3>
                <p>$99.99</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>
            <!-- Product 2 -->
            <div class="product-item" data-id="2" data-name="Smart Watch" data-price="199.99" data-image="https://images.unsplash.com/photo-1546868871-7041f2a55e12?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8c21hcnQlMjB3YXRjaHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=100&q=60">
                <img src="https://images.unsplash.com/photo-1546868871-7041f2a55e12?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8c21hcnQlMjB3YXRjaHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=100&q=60" alt="Smart Watch">
                <h3>Smart Watch</h3>
                <p>$199.99</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>
            <!-- Product 3 -->
            <div class="product-item" data-id="3" data-name="Bluetooth Speaker" data-price="49.99" data-image="https://images.unsplash.com/photo-1589256469027-9953e3895490?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=100&q=60">
                <img src="https://images.unsplash.com/photo-1589256469027-9953e3895490?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=100&q=60" alt="Bluetooth Speaker">
                <h3>Bluetooth Speaker</h3>
                <p>$49.99</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>
            <!-- Product 4 -->
            <div class="product-item" data-id="4" data-name="Laptop Stand" data-price="29.99" data-image="https://images.unsplash.com/photo-1602837349099-79200ff97338?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8bGFwdG9wJTIwc3RhbmR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=100&q=60">
                <img src="https://images.unsplash.com/photo-1602837349099-79200ff97338?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8bGFwdG9wJTIwc3RhbmR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=100&q=60" alt="Laptop Stand">
                <h3>Laptop Stand</h3>
                <p>$29.99</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>
            <!-- Product 5 -->
            <div class="product-item" data-id="5" data-name="Gaming Mouse" data-price="59.99" data-image="https://images.unsplash.com/photo-1615663245857-ac93bb7c39e7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z2FtaW5nJTIwbW91c2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=100&q=60">
                <img src="https://images.unsplash.com/photo-1615663245857-ac93bb7c39e7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Z2FtaW5nJTIwbW91c2V8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=100&q=60" alt="Gaming Mouse">
                <h3>Gaming Mouse</h3>
                <p>$59.99</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>
             <!-- Product 6 -->
            <div class="product-item" data-id="6" data-name="Keyboard" data-price="89.99" data-image="https://images.unsplash.com/photo-1587829741301-dc798b83add3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=100&q=60">
                <img src="https://images.unsplash.com/photo-1587829741301-dc798b83add3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&w=100&q=60" alt="Keyboard">
                <h3>Keyboard</h3>
                <p>$89.99</p>
                <button class="add-to-cart-btn">Add to Cart</button>
            </div>
            <!-- Add more products as needed -->
        </div>

        <div class="cart-container">
            <div class="cart-header">
                Your Shopping Cart
            </div>
            
            <div class="cart-items">
                <!-- Cart items will be dynamically inserted here by JavaScript -->
            </div>
            
            <div class="cart-summary">
                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="cart-subtotal">$0.00</span>
                </div>
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span id="cart-shipping">$0.00</span>
                </div>
                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="cart-total">$0.00</span>
                </div>
                
                <button class="checkout-btn">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cartItemsContainer = document.querySelector('.cart-items');
            const cartSubtotalElement = document.getElementById('cart-subtotal');
            const cartShippingElement = document.getElementById('cart-shipping');
            const cartTotalElement = document.getElementById('cart-total');
            const productListContainer = document.querySelector('.product-list');

            let cart = loadCart(); // Load cart from local storage or initialize
            const SHIPPING_COST = 5.99;

            // Initial Render
            renderCart();

            // --- Event Listeners ---

            // For Add to Cart buttons (event delegation on product list)
            if (productListContainer) {
                productListContainer.addEventListener('click', (event) => {
                    if (event.target.classList.contains('add-to-cart-btn')) {
                        const productItem = event.target.closest('.product-item');
                        const productId = productItem.dataset.id;
                        const productName = productItem.dataset.name;
                        const productPrice = parseFloat(productItem.dataset.price);
                        const productImage = productItem.dataset.image;
                        
                        addItemToCart(productId, productName, productPrice, productImage);
                    }
                });
            }

            // For cart interactions (event delegation on cart items container)
            cartItemsContainer.addEventListener('click', (event) => {
                const target = event.target;
                const itemId = target.dataset.id ?? target.closest('[data-id]')?.dataset.id;

                if (!itemId) return; // Clicked on something not item-specific

                if (target.classList.contains('remove-btn')) {
                    removeItemFromCart(itemId);
                } else if (target.classList.contains('increase-quantity')) {
                    updateItemQuantity(itemId, 1);
                } else if (target.classList.contains('decrease-quantity')) {
                    updateItemQuantity(itemId, -1);
                }
            });

            cartItemsContainer.addEventListener('change', (event) => {
                const target = event.target;
                const itemId = target.dataset.id ?? target.closest('[data-id]')?.dataset.id;

                if (target.classList.contains('quantity-input') && itemId) {
                    const newQuantity = parseInt(target.value, 10);
                    if (!isNaN(newQuantity) && newQuantity > 0) {
                        setCartItemQuantity(itemId, newQuantity);
                    } else {
                        // If input is invalid or zero/negative, reset to 1 or re-render
                        const item = cart.find(item => item.id === itemId);
                        if(item) target.value = item.quantity; // revert input
                        // Optionally, you could enforce a minimum of 1 or remove if 0
                        // setCartItemQuantity(itemId, 1); 
                    }
                }
            });


            // --- Cart Logic Functions ---

            function addItemToCart(id, name, price, image) {
                const existingItem = cart.find(item => item.id === id);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ id, name, price, image, quantity: 1 });
                }
                saveCart();
                renderCart();
            }

            function removeItemFromCart(itemId) {
                cart = cart.filter(item => item.id !== itemId);
                saveCart();
                renderCart();
            }

            function updateItemQuantity(itemId, change) {
                const item = cart.find(item => item.id === itemId);
                if (item) {
                    item.quantity += change;
                    if (item.quantity < 1) {
                        item.quantity = 1; // Prevent quantity from going below 1
                                           // Or remove: removeItemFromCart(itemId);
                    }
                    saveCart();
                    renderCart();
                }
            }

            function setCartItemQuantity(itemId, newQuantity) {
                const item = cart.find(item => item.id === itemId);
                if (item) {
                    if (newQuantity >= 1) {
                        item.quantity = newQuantity;
                    } else {
                        item.quantity = 1; // Enforce minimum 1, or handle as desired
                    }
                    saveCart();
                    renderCart();
                }
            }

            function calculateSubtotal() {
                return cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            }

            function updateSummary() {
                const subtotal = calculateSubtotal();
                const shipping = cart.length > 0 ? SHIPPING_COST : 0;
                const total = subtotal + shipping;

                cartSubtotalElement.textContent = `$${subtotal.toFixed(2)}`;
                cartShippingElement.textContent = `$${shipping.toFixed(2)}`;
                cartTotalElement.textContent = `$${total.toFixed(2)}`;
            }

            function renderCart() {
                cartItemsContainer.innerHTML = ''; 

                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '<p class="empty-cart-message">Your cart is empty.</p>';
                    updateSummary();
                    return;
                }

                cart.forEach(item => {
                    const cartItemElement = document.createElement('div');
                    cartItemElement.classList.add('cart-item');
                    cartItemElement.dataset.id = item.id; 

                    cartItemElement.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="item-image">
                        <div class="item-details">
                            <div class="item-name">${item.name}</div>
                            <div class="item-price">$${item.price.toFixed(2)}</div>
                            <div class="item-quantity">
                                <button class="quantity-btn decrease-quantity" data-id="${item.id}">-</button>
                                <input title="quantity" type="number" value="${item.quantity}" min="1" class="quantity-input" data-id="${item.id}">
                                <button class="quantity-btn increase-quantity" data-id="${item.id}">+</button>
                            </div>
                            <button class="remove-btn" data-id="${item.id}">Remove</button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItemElement);
                });

                updateSummary();
            }

            // --- Local Storage for Cart Persistence ---
            function saveCart() {
                localStorage.setItem('shoppingCart', JSON.stringify(cart));
            }

            function loadCart() {
                const storedCart = localStorage.getItem('shoppingCart');
                return storedCart ? JSON.parse(storedCart) : [];
            }

            // --- Checkout Button (Placeholder) ---
            const checkoutBtn = document.querySelector('.checkout-btn');
            if (checkoutBtn) {
                checkoutBtn.addEventListener('click', () => {
                    if (cart.length > 0) {
                        alert(`Proceeding to checkout with a total of ${cartTotalElement.textContent}! (This is a demo)`);
                        // cart = []; 
                        // saveCart();
                        // renderCart();
                    } else {
                        alert('Your cart is empty. Please add items before proceeding to checkout.');
                    }
                });
            }
        });
    </script>
</body>
<footer>
    <div class="footer">
        <p>&copy; 2023 Simple E-Commerce Cart. All rights reserved.</p>
    </div>
</footer>
</html>